{
	"info": {
		"_postman_id": "tspark-gyms-challenges-ilia-2024",
		"name": "TSPark - Gyms & Challenges API - Ilia Tests",
		"description": "Collection de tests pour les endpoints Gyms et Challenges du projet TSPark.\n\n## Fonctionnalit√©s test√©es :\n\n### üèãÔ∏è Gestion des Salles de Sport\n- ‚úÖ Cr√©er une salle (r√¥le gym_owner)\n- ‚úÖ Lister les salles approuv√©es (public)\n- ‚úÖ D√©tails d'une salle\n- ‚úÖ Modifier une salle (propri√©taire ou super_admin)\n- ‚úÖ Approuver une salle (super_admin uniquement)\n\n### üéØ Gestion des D√©fis\n- ‚úÖ Cr√©er un d√©fi\n- ‚úÖ Lister les d√©fis\n- ‚úÖ D√©tails d'un d√©fi\n- ‚úÖ Rejoindre un d√©fi (client)\n- ‚úÖ Quitter un d√©fi (client)\n- ‚úÖ Voir les participations\n\n## Utilisation :\n1. D√©marrer le serveur : `npm run dev`\n2. Ex√©cuter les logins pour obtenir les tokens JWT\n3. Tester le workflow complet\n4. V√©rifier les sc√©narios d'erreur\n\nURL de base : http://localhost:3000/api\n\nCr√©√© par : Ilia - D√©cembre 2024",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîê Authentification",
			"item": [
				{
					"name": "Register - Utilisateur Normal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Inscription r√©ussie\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Utilisateur cr√©√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('user');",
									"    pm.expect(jsonData.data.user).to.have.property('id');",
									"    pm.expect(jsonData.data.user).to.have.property('email');",
									"});",
									"",
									"// Sauvegarder les infos du nouvel utilisateur",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.user) {",
									"    pm.collectionVariables.set(\"new_user_email\", jsonData.data.user.email);",
									"    pm.collectionVariables.set(\"new_user_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Utilisateur inscrit:\", jsonData.data.user.email);",
									"    console.log(\"üÜî ID:\", jsonData.data.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"nouveauclient@tspark.com\",\n  \"password\": \"SecurePass123\",\n  \"firstName\": \"Jean\",\n  \"lastName\": \"Dupont\",\n  \"role\": \"client\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"register"
							]
						},
						"description": "Inscription d'un nouvel utilisateur avec le r√¥le client"
					},
					"response": []
				},
				{
					"name": "Register - Super Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Super Admin cr√©√©\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"R√¥le super_admin assign√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.role).to.eql('super_admin');",
									"});",
									"",
									"// Sauvegarder les infos du super admin",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.user) {",
									"    pm.collectionVariables.set(\"new_admin_email\", jsonData.data.user.email);",
									"    pm.collectionVariables.set(\"new_admin_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Super Admin cr√©√©:\", jsonData.data.user.email);",
									"    console.log(\"üîë R√¥le:\", jsonData.data.user.role);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"nouveauadmin@tspark.com\",\n  \"password\": \"SuperSecurePass123\",\n  \"firstName\": \"Marie\",\n  \"lastName\": \"Martin\",\n  \"role\": \"super_admin\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"register"
							]
						},
						"description": "Inscription d'un nouveau super administrateur"
					},
					"response": []
				},
				{
					"name": "Login - Utilisateur Normal",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Connexion r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token re√ßu\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('token');",
									"});",
									"",
									"// Sauvegarder le token utilisateur",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.collectionVariables.set(\"user_token\", jsonData.data.token);",
									"    pm.collectionVariables.set(\"user_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Connect√© comme:\", jsonData.data.user.email);",
									"    console.log(\"üîë Token sauvegard√©\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@tspark.com\",\n  \"password\": \"SecurePass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Connexion d'un utilisateur standard"
					},
					"response": []
				},
				{
					"name": "Login - Propri√©taire de Salle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Connexion r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token re√ßu\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('token');",
									"});",
									"",
									"// Sauvegarder le token",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.collectionVariables.set(\"gym_owner_token\", jsonData.data.token);",
									"    pm.collectionVariables.set(\"gym_owner_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Connect√© comme:\", jsonData.data.user.email);",
									"    console.log(\"üîë Token sauvegard√©\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"gym.owner@tspark.com\",\n  \"password\": \"SecurePass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Connexion avec le r√¥le gym_owner pour g√©rer les salles"
					},
					"response": []
				},
				{
					"name": "Login - Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Connexion r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.collectionVariables.set(\"client_token\", jsonData.data.token);",
									"    pm.collectionVariables.set(\"client_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Connect√© comme client:\", jsonData.data.user.email);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"client@tspark.com\",\n  \"password\": \"SecurePass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Connexion avec le r√¥le client pour participer aux d√©fis"
					},
					"response": []
				},
				{
					"name": "Register - Propri√©taire de Salle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Inscription gym_owner r√©ussie\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"R√¥le gym_owner confirm√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.role).to.eql('gym_owner');",
									"});",
									"",
									"pm.test(\"Email correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.email).to.eql('gym.owner@tspark.com');",
									"});",
									"",
									"// Sauvegarder les donn√©es pour les tests suivants",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.user) {",
									"    pm.collectionVariables.set(\"gym_owner_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Propri√©taire de salle cr√©√©:\", jsonData.data.user.email);",
									"    console.log(\"üèãÔ∏è ID gym_owner:\", jsonData.data.user.id);",
									"    console.log(\"üë§ Nom complet:\", jsonData.data.user.firstName, jsonData.data.user.lastName);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"gym.owner@tspark.com\",\n  \"password\": \"SecurePass123\",\n  \"firstName\": \"Pierre\",\n  \"lastName\": \"Gym Owner\",\n  \"role\": \"gym_owner\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"register"
							]
						},
						"description": "Cr√©er un nouveau propri√©taire de salle de sport"
					},
					"response": []
				},
				{
					"name": "Login - Super Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Connexion Super Admin r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√¥le super_admin confirm√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.role).to.eql('super_admin');",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.collectionVariables.set(\"admin_token\", jsonData.data.token);",
									"    pm.collectionVariables.set(\"admin_id\", jsonData.data.user.id);",
									"    console.log(\"‚úÖ Connect√© comme admin:\", jsonData.data.user.email);",
									"    console.log(\"üëë Privil√®ges super_admin activ√©s\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@tspark.com\",\n  \"password\": \"AdminSecure123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Connexion avec privil√®ges super administrateur"
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Profil utilisateur r√©cup√©r√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es utilisateur compl√®tes\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('email');",
									"    pm.expect(jsonData.data).to.have.property('firstName');",
									"    pm.expect(jsonData.data).to.have.property('lastName');",
									"    pm.expect(jsonData.data).to.have.property('role');",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"console.log(\"üë§ Utilisateur actuel:\", jsonData.data.firstName, jsonData.data.lastName);",
									"console.log(\"üìß Email:\", jsonData.data.email);",
									"console.log(\"üîë R√¥le:\", jsonData.data.role);",
									"console.log(\"üéØ Points totaux:\", jsonData.data.totalPoints || 0);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"me"
							]
						},
						"description": "R√©cup√©rer les informations de l'utilisateur connect√©"
					},
					"response": []
				}
			],
			"description": "Tests d'authentification pour obtenir les tokens JWT"
		},
		{
			"name": "üèãÔ∏è Salles de Sport",
			"item": [
				{
					"name": "Cr√©er une Nouvelle Salle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Salle cr√©√©e avec succ√®s\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Donn√©es de la salle re√ßues\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('name');",
									"    pm.expect(jsonData.data.status).to.eql('pending');",
									"});",
									"",
									"// Sauvegarder l'ID de la salle",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.id) {",
									"    pm.collectionVariables.set(\"new_gym_id\", jsonData.data.id);",
									"    console.log(\"‚úÖ Salle cr√©√©e avec l'ID:\", jsonData.data.id);",
									"    console.log(\"üìù Statut:\", jsonData.data.status);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"PowerGym Paris 15\",\n  \"description\": \"Salle de sport moderne avec √©quipements haut de gamme et coachs professionnels\",\n  \"address\": \"15 Rue de Vaugirard\",\n  \"city\": \"Paris\",\n  \"phone\": \"01.45.67.89.10\",\n  \"email\": \"contact@powergym-paris15.fr\",\n  \"capacity\": 120,\n  \"equipment\": [\"Tapis de course\", \"V√©los elliptiques\", \"Poids libres\", \"Machines guid√©es\", \"Espace stretching\"],\n  \"specializedExerciseTypes\": [\"cardio\", \"musculation\", \"fitness\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/gyms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms"
							]
						},
						"description": "Cr√©er une nouvelle salle de sport (n√©cessite le r√¥le gym_owner)"
					},
					"response": []
				},
				{
					"name": "Lister Toutes les Salles Approuv√©es",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Liste r√©cup√©r√©e\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√©ponse est un tableau\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Toutes les salles sont approuv√©es\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.data.forEach(function(gym) {",
									"        pm.expect(gym.status).to.eql('approved');",
									"    });",
									"});",
									"",
									"console.log(\"üìã Nombre de salles approuv√©es:\", pm.response.json().data.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/gyms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms"
							]
						},
						"description": "Lister toutes les salles approuv√©es (endpoint public)"
					},
					"response": []
				},
				{
					"name": "D√©tails d'une Salle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"D√©tails r√©cup√©r√©s\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es compl√®tes\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('name');",
									"    pm.expect(jsonData.data).to.have.property('description');",
									"    pm.expect(jsonData.data).to.have.property('equipment');",
									"});",
									"",
									"console.log(\"üèãÔ∏è Salle:\", pm.response.json().data.name);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/gyms/{{new_gym_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms",
								"{{new_gym_id}}"
							]
						},
						"description": "Obtenir les d√©tails d'une salle sp√©cifique"
					},
					"response": []
				},
				{
					"name": "Modifier une Salle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Modification r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es mises √† jour\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.description).to.include('MISE √Ä JOUR');",
									"});",
									"",
									"console.log(\"‚úèÔ∏è Salle modifi√©e:\", pm.response.json().data.name);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"MISE √Ä JOUR : Salle de sport moderne avec √©quipements haut de gamme, coachs professionnels et nouveau studio de yoga !\",\n  \"capacity\": 150,\n  \"equipment\": [\"Tapis de course\", \"V√©los elliptiques\", \"Poids libres\", \"Machines guid√©es\", \"Espace stretching\", \"Studio yoga\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/gyms/{{new_gym_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms",
								"{{new_gym_id}}"
							]
						},
						"description": "Modifier les d√©tails d'une salle (propri√©taire ou super_admin uniquement)"
					},
					"response": []
				},
				{
					"name": "Approuver une Salle (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Approbation r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Statut chang√© en approuv√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.status).to.eql('approved');",
									"});",
									"",
									"console.log(\"‚úÖ Salle approuv√©e:\", pm.response.json().data.name);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/gyms/{{new_gym_id}}/approve",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms",
								"{{new_gym_id}}",
								"approve"
							]
						},
						"description": "Approuver une salle de sport (super_admin uniquement)"
					},
					"response": []
				}
			],
			"description": "Tests pour la gestion des salles de sport"
		},
		{
			"name": "üéØ D√©fis Sportifs",
			"item": [
				{
					"name": "Cr√©er un Nouveau D√©fi",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"D√©fi cr√©√© avec succ√®s\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Donn√©es du d√©fi re√ßues\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('title');",
									"    pm.expect(jsonData.data).to.have.property('objectives');",
									"});",
									"",
									"// Sauvegarder l'ID du d√©fi",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.id) {",
									"    pm.collectionVariables.set(\"new_challenge_id\", jsonData.data.id);",
									"    console.log(\"‚úÖ D√©fi cr√©√© avec l'ID:\", jsonData.data.id);",
									"    console.log(\"üéØ Titre:\", jsonData.data.title);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Challenge Hiver 2024 - 30 Jours Fitness\",\n  \"description\": \"Relevez le d√©fi de faire 30 s√©ances d'entra√Ænement en 30 jours pour d√©marrer l'ann√©e en forme !\",\n  \"type\": \"individual\",\n  \"difficulty\": \"medium\",\n  \"objectives\": {\n    \"targetWorkouts\": 30,\n    \"targetCalories\": 12000,\n    \"targetDuration\": 1500\n  },\n  \"startDate\": \"2024-12-15T00:00:00.000Z\",\n  \"endDate\": \"2025-01-15T23:59:59.000Z\",\n  \"pointsReward\": 500,\n  \"maxParticipants\": 100,\n  \"isPublic\": true,\n  \"gymId\": \"{{new_gym_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/challenges",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges"
							]
						},
						"description": "Cr√©er un nouveau d√©fi sportif"
					},
					"response": []
				},
				{
					"name": "Lister Tous les D√©fis",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Liste r√©cup√©r√©e\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√©ponse est un tableau\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"console.log(\"üìã Nombre de d√©fis trouv√©s:\", pm.response.json().data.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges"
							]
						},
						"description": "Lister tous les d√©fis actifs"
					},
					"response": []
				},
				{
					"name": "Lister les D√©fis avec Filtres",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Filtrage fonctionnel\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"D√©fis filtr√©s correctement\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.data.forEach(function(challenge) {",
									"        pm.expect(challenge.difficulty).to.eql('medium');",
									"        pm.expect(challenge.type).to.eql('individual');",
									"    });",
									"});",
									"",
									"console.log(\"üîç D√©fis filtr√©s:\", pm.response.json().data.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges?difficulty=medium&type=individual",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges"
							],
							"query": [
								{
									"key": "difficulty",
									"value": "medium"
								},
								{
									"key": "type",
									"value": "individual"
								}
							]
						},
						"description": "Lister les d√©fis avec filtres de difficult√© et type"
					},
					"response": []
				},
				{
					"name": "D√©tails d'un D√©fi",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"D√©tails r√©cup√©r√©s\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es compl√®tes du d√©fi\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('title');",
									"    pm.expect(jsonData.data).to.have.property('objectives');",
									"    pm.expect(jsonData.data).to.have.property('creator');",
									"});",
									"",
									"console.log(\"üéØ D√©fi:\", pm.response.json().data.title);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/{{new_challenge_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"{{new_challenge_id}}"
							]
						},
						"description": "Obtenir les d√©tails complets d'un d√©fi sp√©cifique"
					},
					"response": []
				},
				{
					"name": "Rejoindre un D√©fi (Client)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Participation cr√©√©e\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Donn√©es de participation\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('challengeId');",
									"    pm.expect(jsonData.data).to.have.property('userId');",
									"    pm.expect(jsonData.data.status).to.eql('joined');",
									"});",
									"",
									"console.log(\"‚úÖ Participation au d√©fi r√©ussie !\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/{{new_challenge_id}}/join",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"{{new_challenge_id}}",
								"join"
							]
						},
						"description": "Rejoindre un d√©fi en tant que client"
					},
					"response": []
				},
				{
					"name": "Voir les Participants du D√©fi",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Liste des participants\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Au moins un participant\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"    pm.expect(jsonData.data.length).to.be.at.least(1);",
									"});",
									"",
									"console.log(\"üë• Nombre de participants:\", pm.response.json().data.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/{{new_challenge_id}}/participants",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"{{new_challenge_id}}",
								"participants"
							]
						},
						"description": "Voir la liste des participants d'un d√©fi"
					},
					"response": []
				},
				{
					"name": "Mes Participations (Client)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Participations r√©cup√©r√©es\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Au moins une participation\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"    pm.expect(jsonData.data.length).to.be.at.least(1);",
									"});",
									"",
									"console.log(\"üìã Mes participations:\", pm.response.json().data.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/participations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"participations"
							]
						},
						"description": "Voir toutes les participations de l'utilisateur actuel"
					},
					"response": []
				},
				{
					"name": "Quitter un D√©fi (Client)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"D√©part r√©ussi\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"console.log(\"‚ùå D√©fi quitt√© avec succ√®s\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/{{new_challenge_id}}/leave",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"{{new_challenge_id}}",
								"leave"
							]
						},
						"description": "Quitter un d√©fi en cours"
					},
					"response": []
				}
			],
			"description": "Tests pour la gestion des d√©fis sportifs"
		},
		{
			"name": "üí™ Exercices",
			"item": [
				{
					"name": "Cr√©er un Nouvel Exercice (Super Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Exercice cr√©√© avec succ√®s\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Donn√©es de l'exercice re√ßues\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('name');",
									"    pm.expect(jsonData.data).to.have.property('difficulty');",
									"});",
									"",
									"// Sauvegarder l'ID de l'exercice",
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.id) {",
									"    pm.collectionVariables.set(\"exercise_id\", jsonData.data.id);",
									"    console.log(\"‚úÖ Exercice cr√©√© avec l'ID:\", jsonData.data.id);",
									"    console.log(\"üí™ Nom:\", jsonData.data.name);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Pompes Diamant\",\n  \"description\": \"Variation difficile des pompes traditionnelles avec les mains en forme de diamant\",\n  \"muscleGroups\": [\"pectoraux\", \"triceps\", \"√©paules\"],\n  \"difficulty\": \"advanced\",\n  \"caloriesPerMinute\": 8.5,\n  \"instructions\": \"Placez vos mains en forme de diamant sous votre poitrine, descendez et remontez en contr√¥lant le mouvement\",\n  \"videoUrl\": \"https://example.com/pompes-diamant.mp4\",\n  \"imageUrl\": \"https://example.com/pompes-diamant.jpg\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/exercises",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises"
							]
						},
						"description": "Cr√©er un nouvel exercice (super_admin uniquement)"
					},
					"response": []
				},
				{
					"name": "Lister Tous les Exercices",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Liste r√©cup√©r√©e\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√©ponse est un objet avec exercices\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('exercises');",
									"    pm.expect(jsonData.data.exercises).to.be.an('array');",
									"});",
									"",
									"console.log(\"üìã Nombre d'exercices trouv√©s:\", pm.response.json().data.exercises.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/exercises",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises"
							]
						},
						"description": "Lister tous les exercices disponibles"
					},
					"response": []
				},
				{
					"name": "Lister Exercices avec Filtres",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Filtrage fonctionnel\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Exercices filtr√©s correctement\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.data.exercises.forEach(function(exercise) {",
									"        pm.expect(exercise.difficulty).to.eql('advanced');",
									"    });",
									"});",
									"",
									"console.log(\"üîç Exercices filtr√©s:\", pm.response.json().data.exercises.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/exercises?difficulty=advanced&muscleGroup=pectoraux",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises"
							],
							"query": [
								{
									"key": "difficulty",
									"value": "advanced"
								},
								{
									"key": "muscleGroup",
									"value": "pectoraux"
								}
							]
						},
						"description": "Lister les exercices avec filtres de difficult√© et groupe musculaire"
					},
					"response": []
				},
				{
					"name": "Rechercher Exercices",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Recherche fonctionnelle\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√©sultats de recherche\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('exercises');",
									"});",
									"",
									"console.log(\"üîç R√©sultats de recherche:\", pm.response.json().data.exercises.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/exercises/search?q=pompes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "pompes"
								}
							]
						},
						"description": "Rechercher des exercices par nom ou description"
					},
					"response": []
				},
				{
					"name": "D√©tails d'un Exercice",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"D√©tails r√©cup√©r√©s\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es compl√®tes de l'exercice\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('name');",
									"    pm.expect(jsonData.data).to.have.property('instructions');",
									"    pm.expect(jsonData.data).to.have.property('createdBy');",
									"});",
									"",
									"console.log(\"üí™ Exercice:\", pm.response.json().data.name);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/exercises/{{exercise_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises",
								"{{exercise_id}}"
							]
						},
						"description": "Obtenir les d√©tails complets d'un exercice sp√©cifique"
					},
					"response": []
				},
				{
					"name": "Modifier un Exercice (Super Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Modification r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Exercice modifi√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.description).to.include('MISE √Ä JOUR');",
									"});",
									"",
									"console.log(\"‚úèÔ∏è Exercice modifi√©:\", pm.response.json().data.name);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"MISE √Ä JOUR : Variation tr√®s difficile des pompes traditionnelles avec les mains en forme de diamant, excellent pour les triceps\",\n  \"caloriesPerMinute\": 9.0,\n  \"instructions\": \"Placez vos mains en forme de diamant sous votre poitrine, descendez lentement et remontez en contr√¥lant parfaitement le mouvement. Gardez le corps bien droit.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/exercises/{{exercise_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises",
								"{{exercise_id}}"
							]
						},
						"description": "Modifier un exercice existant (super_admin uniquement)"
					},
					"response": []
				},
				{
					"name": "Supprimer un Exercice (Super Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Suppression r√©ussie\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"console.log(\"üóëÔ∏è Exercice supprim√© avec succ√®s\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/exercises/{{exercise_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"exercises",
								"{{exercise_id}}"
							]
						},
						"description": "Supprimer un exercice (super_admin uniquement)"
					},
					"response": []
				}
			],
			"description": "Tests pour la gestion des exercices sportifs"
		},
		{
			"name": "üë• Gestion des Utilisateurs",
			"item": [
				{
					"name": "Lister Tous les Utilisateurs (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Liste utilisateurs r√©cup√©r√©e\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"R√©ponse contient la liste des utilisateurs\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('users');",
									"    pm.expect(jsonData.data.users).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Pas de mots de passe dans la r√©ponse\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.data.users.forEach(user => {",
									"        pm.expect(user).to.not.have.property('password');",
									"    });",
									"});",
									"",
									"console.log(\"üë• Utilisateurs list√©s:\", pm.response.json().data.users.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						},
						"description": "Lister tous les utilisateurs (super_admin uniquement)"
					},
					"response": []
				},
				{
					"name": "Voir Profil Utilisateur par ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Profil r√©cup√©r√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es utilisateur compl√®tes\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('user');",
									"    pm.expect(jsonData.data.user).to.have.property('email');",
									"});",
									"",
									"pm.test(\"Pas de mot de passe\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user).to.not.have.property('password');",
									"});",
									"",
									"console.log(\"üë§ Profil utilisateur r√©cup√©r√©\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users/{{gym_owner_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{gym_owner_id}}"
							]
						},
						"description": "Voir son propre profil ou celui d'un autre utilisateur (admin)"
					},
					"response": []
				},
				{
					"name": "Modifier Profil Utilisateur",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Profil modifi√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Changements appliqu√©s\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.firstName).to.eql('Pierre');",
									"});",
									"",
									"console.log(\"‚úèÔ∏è Profil modifi√©:\", pm.response.json().data.user.firstName, pm.response.json().data.user.lastName);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"Pierre\",\n  \"lastName\": \"Martin\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{gym_owner_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{gym_owner_id}}"
							]
						},
						"description": "Modifier son propre profil ou celui d'un autre utilisateur (admin)"
					},
					"response": []
				},
				{
					"name": "Modifier Email Utilisateur",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Email modifi√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Nouvel email appliqu√©\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user.email).to.eql('pierre.martin@tspark.com');",
									"});",
									"",
									"console.log(\"üìß Email modifi√©:\", pm.response.json().data.user.email);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"pierre.martin@tspark.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{gym_owner_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{gym_owner_id}}"
							]
						},
						"description": "Modifier l'email d'un utilisateur"
					},
					"response": []
				},
				{
					"name": "Changer Mot de Passe",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Mot de passe chang√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Message de confirmation\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.message).to.include('Password changed');",
									"});",
									"",
									"console.log(\"üîí Mot de passe chang√© avec succ√®s\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"SecurePass123\",\n  \"newPassword\": \"NewSecurePassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{client_id}}/password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{client_id}}",
								"password"
							]
						},
						"description": "Changer son mot de passe (utilisateur connect√© uniquement)"
					},
					"response": []
				},
				{
					"name": "Voir Statistiques Utilisateur",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Statistiques r√©cup√©r√©es\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Donn√©es statistiques pr√©sentes\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('totalPoints');",
									"    pm.expect(jsonData.data).to.have.property('memberSince');",
									"});",
									"",
									"var stats = pm.response.json().data;",
									"console.log(\"üìä Statistiques:\");",
									"console.log(\"üéØ Points totaux:\", stats.totalPoints);",
									"console.log(\"üìÖ Membre depuis:\", stats.memberSince);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users/{{client_id}}/stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{client_id}}",
								"stats"
							]
						},
						"description": "Voir ses propres statistiques ou celles d'un autre utilisateur (admin)"
					},
					"response": []
				},
				{
					"name": "Supprimer Utilisateur (Admin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Utilisateur supprim√©\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Message de confirmation\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.message).to.include('deleted');",
									"});",
									"",
									"console.log(\"üóëÔ∏è Utilisateur supprim√© (soft delete)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/users/{{new_user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{new_user_id}}"
							]
						},
						"description": "Supprimer un utilisateur (super_admin uniquement) - Soft delete"
					},
					"response": []
				}
			],
			"description": "Tests pour la gestion des profils utilisateurs"
		},
		{
			"name": "‚ùå Tests d'Erreurs",
			"item": [
				{
					"name": "Cr√©er Salle - Non Autoris√©",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Rejet correct\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"console.log(\"‚úÖ Requ√™te non autoris√©e correctement rejet√©e\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Salle Sans Auth\",\n  \"description\": \"Ceci devrait √©chouer\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/gyms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms"
							]
						},
						"description": "Tentative de cr√©ation de salle sans authentification"
					},
					"response": []
				},
				{
					"name": "Rejoindre D√©fi Inexistant",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Erreur 404 correcte\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"console.log(\"‚úÖ D√©fi inexistant correctement g√©r√©\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/challenges/id-inexistant/join",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges",
								"id-inexistant",
								"join"
							]
						},
						"description": "Tentative de rejoindre un d√©fi qui n'existe pas"
					},
					"response": []
				},
				{
					"name": "Approuver Salle - Mauvais R√¥le",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Acc√®s refus√©\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"",
									"console.log(\"‚úÖ Contr√¥le des r√¥les fonctionnel\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{client_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/gyms/{{new_gym_id}}/approve",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"gyms",
								"{{new_gym_id}}",
								"approve"
							]
						},
						"description": "Tentative d'approbation avec un r√¥le client (devrait √©chouer)"
					},
					"response": []
				},
				{
					"name": "Donn√©es Invalides - Cr√©ation D√©fi",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation des donn√©es\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"console.log(\"‚úÖ Validation des donn√©es fonctionnelle\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{gym_owner_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"\",\n  \"description\": \"D√©fi sans titre\",\n  \"startDate\": \"2023-01-01\",\n  \"endDate\": \"2022-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/challenges",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"challenges"
							]
						},
						"description": "Cr√©er un d√©fi avec des donn√©es invalides"
					},
					"response": []
				}
			],
			"description": "Tests des sc√©narios d'erreur et de validation"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000/api",
			"type": "string",
			"description": "URL de base de l'API TSPark"
		},
		{
			"key": "user_token",
			"value": "",
			"type": "string",
			"description": "Token JWT pour l'utilisateur standard"
		},
		{
			"key": "new_user_email",
			"value": "",
			"type": "string",
			"description": "Email du nouvel utilisateur cr√©√©"
		},
		{
			"key": "new_user_id",
			"value": "",
			"type": "string",
			"description": "ID du nouvel utilisateur cr√©√©"
		},
		{
			"key": "new_admin_email",
			"value": "",
			"type": "string",
			"description": "Email du nouveau super admin cr√©√©"
		},
		{
			"key": "new_admin_id",
			"value": "",
			"type": "string",
			"description": "ID du nouveau super admin cr√©√©"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string",
			"description": "ID de l'utilisateur standard connect√©"
		},
		{
			"key": "gym_owner_token",
			"value": "",
			"type": "string",
			"description": "Token JWT pour le propri√©taire de salle"
		},
		{
			"key": "client_token",
			"value": "",
			"type": "string",
			"description": "Token JWT pour le client"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string",
			"description": "Token JWT pour le super admin"
		},
		{
			"key": "gym_owner_id",
			"value": "",
			"type": "string",
			"description": "ID de l'utilisateur propri√©taire"
		},
		{
			"key": "client_id",
			"value": "",
			"type": "string",
			"description": "ID de l'utilisateur client"
		},
		{
			"key": "admin_id",
			"value": "",
			"type": "string",
			"description": "ID de l'utilisateur admin"
		},
		{
			"key": "new_gym_id",
			"value": "",
			"type": "string",
			"description": "ID de la nouvelle salle cr√©√©e"
		},
		{
			"key": "new_challenge_id",
			"value": "",
			"type": "string",
			"description": "ID du nouveau d√©fi cr√©√©"
		}
	]
}